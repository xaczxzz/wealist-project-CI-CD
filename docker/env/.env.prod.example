# =============================================================================
# weAlist Project - Production Environment Variables
# =============================================================================
# 프로덕션 환경용 설정입니다.
#
# ⚠️ 보안 주의사항:
#   1. 모든 패스워드와 시크릿은 강력하고 고유한 값으로 변경하세요
#   2. 이 파일을 절대 Git에 커밋하지 마세요
#   3. 가능하면 외부 시크릿 관리 시스템 사용 (AWS Secrets Manager, Vault 등)
#   4. 정기적으로 시크릿을 로테이션하세요
#
# 사용법:
#   1. 이 파일을 복사: cp docker/env/.env.prod.example docker/env/.env.prod
#   2. 모든 시크릿을 강력한 값으로 변경
#   3. 프로덕션 서버에 안전하게 배포
# =============================================================================

# =============================================================================
# Application Configuration
# =============================================================================
APP_NAME=wealist-api
VERSION=1.0.0
ENVIRONMENT=production

# =============================================================================
# Database Configuration - AWS RDS PostgreSQL
# =============================================================================
# ⚠️ 프로덕션에서는 AWS RDS를 사용합니다!
# RDS 콘솔에서 생성한 엔드포인트와 자격증명을 입력하세요.

# RDS 엔드포인트 (예: mydb.c9akl45jdo4e.ap-northeast-2.rds.amazonaws.com)
RDS_ENDPOINT=your-rds-instance.region.rds.amazonaws.com
RDS_PORT=5432

# User Service DB 설정
USER_DB_NAME=wealist_user_db
USER_DB_USER=wealist_user
USER_DB_PASSWORD=CHANGE_THIS_RDS_PASSWORD_MIN_32_CHARS

# Board Service DB 설정
BOARD_DB_NAME=wealist_board_db
BOARD_DB_USER=board_service
BOARD_DB_PASSWORD=CHANGE_THIS_RDS_PASSWORD_MIN_32_CHARS

# Spring Boot용 JDBC URL (자동 구성됨)
SPRING_DATASOURCE_URL=jdbc:postgresql://${RDS_ENDPOINT}:${RDS_PORT}/${USER_DB_NAME}?sslmode=require
SPRING_DATASOURCE_USERNAME=${USER_DB_USER}
SPRING_DATASOURCE_PASSWORD=${USER_DB_PASSWORD}

# Board Service용 PostgreSQL URL
DATABASE_URL=postgresql://${BOARD_DB_USER}:${BOARD_DB_PASSWORD}@${RDS_ENDPOINT}:${RDS_PORT}/${BOARD_DB_NAME}?sslmode=require

# =============================================================================
# Cache Configuration - AWS ElastiCache Redis
# =============================================================================
# ⚠️ 프로덕션에서는 AWS ElastiCache를 사용합니다!
# ElastiCache 콘솔에서 생성한 엔드포인트를 입력하세요.

# ElastiCache 엔드포인트 (예: myredis.abc123.0001.apne2.cache.amazonaws.com)
ELASTICACHE_ENDPOINT=your-redis.region.cache.amazonaws.com
ELASTICACHE_PORT=6379

# ElastiCache Auth Token (AUTH 활성화 시)
REDIS_PASSWORD=CHANGE_THIS_ELASTICACHE_AUTH_TOKEN

# Spring Boot용 Redis 설정
SPRING_REDIS_HOST=${ELASTICACHE_ENDPOINT}
SPRING_REDIS_PORT=${ELASTICACHE_PORT}
SPRING_REDIS_PASSWORD=${REDIS_PASSWORD}

# Board Service용 Redis URL
REDIS_URL=redis://:${REDIS_PASSWORD}@${ELASTICACHE_ENDPOINT}:${ELASTICACHE_PORT}/1

# =============================================================================
# JWT Configuration
# =============================================================================
# ⚠️ 필수: 64자 이상의 랜덤 시크릿 사용!
# 생성 방법: openssl rand -base64 64
JWT_SECRET=CHANGE_THIS_JWT_SECRET_TO_RANDOM_64_PLUS_CHARS_USE_OPENSSL_RAND_BASE64_64
JWT_ACCESS_TOKEN_EXPIRATION_MS=1800000      # Access Token: 30분 (보안 강화)
JWT_REFRESH_TOKEN_EXPIRATION_MS=604800000   # Refresh Token: 7일

# Board Service에서도 JWT_SECRET을 SECRET_KEY로 참조
# (docker-compose.yml에서 SECRET_KEY=${JWT_SECRET}로 매핑됨)

# =============================================================================
# JPA/Hibernate Configuration
# =============================================================================
JPA_DDL_AUTO=validate          # 프로덕션에서는 validate 또는 none 사용
JPA_SHOW_SQL=false             # 프로덕션에서는 SQL 로깅 비활성화
JPA_FORMAT_SQL=false
JPA_DIALECT=org.hibernate.dialect.PostgreSQLDialect

# =============================================================================
# Service Ports
# =============================================================================
USER_HOST_PORT=8080
BOARD_HOST_PORT=8000
BOARD_SERVER_PORT=8000

# Board Service - User Service 연동 URL (프로덕션에서는 내부 네트워크 사용)
USER_SERVICE_URL=http://user-service:8080

FRONTEND_HOST_PORT=80          # 프로덕션에서는 80 포트

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=info                 # 프로덕션에서는 info 또는 warn

# =============================================================================
# OAuth2 Configuration - Google
# =============================================================================
# ⚠️ 프로덕션용 OAuth 클라이언트를 별도로 생성하세요
# Redirect URI: https://yourdomain.com/oauth/callback
GOOGLE_CLIENT_ID=your-prod-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-prod-google-client-secret
OAUTH2_REDIRECT_URL=https://yourdomain.com/oauth/callback

# =============================================================================
# CORS Configuration
# =============================================================================
# 프로덕션에서는 실제 도메인만 허용
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# =============================================================================
# Frontend Environment Variables (S3 + CloudFront)
# =============================================================================
# ⚠️ Frontend는 S3에 빌드하여 업로드하고 CloudFront로 배포합니다.
# 빌드 시 다음 환경변수가 .env.production 파일에 포함되어야 합니다.

# CloudFront 도메인 또는 커스텀 도메인
FRONTEND_DOMAIN=https://yourdomain.com

# API 엔드포인트 (ALB/API Gateway URL)
VITE_REACT_APP_JAVA_API_URL=https://api.yourdomain.com
VITE_REACT_APP_GO_API_URL=https://api.yourdomain.com/board
VITE_GOOGLE_CLIENT_ID=your-prod-google-client-id.apps.googleusercontent.com

# S3 배포 정보 (CI/CD용)
S3_BUCKET_NAME=wealist-frontend-prod
CLOUDFRONT_DISTRIBUTION_ID=E1234567890ABC

# =============================================================================
# Monitoring Configuration (선택사항)
# =============================================================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# ⚠️ Grafana 관리자 비밀번호를 반드시 변경하세요!
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD

REDIS_EXPORTER_PORT=9121
POSTGRES_EXPORTER_PORT=9187
NODE_EXPORTER_PORT=9100

# =============================================================================
# Build Configuration
# =============================================================================
CACHEBUST=1

# =============================================================================
# SSL/TLS Configuration (선택사항)
# =============================================================================
# SSL_CERT_PATH=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
# SSL_KEY_PATH=/etc/letsencrypt/live/yourdomain.com/privkey.pem

# =============================================================================
# Backup Configuration (선택사항)
# =============================================================================
# BACKUP_SCHEDULE=0 2 * * *  # 매일 새벽 2시
# BACKUP_RETENTION_DAYS=30
# BACKUP_S3_BUCKET=your-backup-bucket

# =============================================================================
# Alert Configuration (선택사항)
# =============================================================================
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# ALERT_EMAIL=alerts@yourdomain.com
