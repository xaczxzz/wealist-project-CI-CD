# =============================================================================
# weAlist Project - EC2 Dev Environment Variables
# =============================================================================
# EC2 단일 인스턴스 Dev 환경용 설정 파일입니다.
# 모든 서비스 + PostgreSQL + Redis + 모니터링이 하나의 EC2에서 실행됩니다.
#
# 사용법:
#   1. 이 파일을 복사:
#      cp docker/env/.env.ec2-dev.example docker/env/.env.ec2-dev
#
#   2. 필수 값 수정 (⭐ 표시된 항목):
#      - JWT_SECRET: 64자 이상의 랜덤 문자열
#      - 모든 PASSWORD: 강력한 비밀번호
#      - GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET: Google OAuth 설정
#
#   3. EC2 퍼블릭 IP로 CORS 설정:
#      - CORS_ORIGINS에 EC2 IP 추가
#      - VITE 환경변수에 EC2 IP 설정
# =============================================================================

# =============================================================================
# Application Configuration
# =============================================================================
APP_NAME=wealist-api-ec2-dev
VERSION=latest
ENVIRONMENT=dev
CACHEBUST=1

# =============================================================================
# Database Configuration - PostgreSQL
# =============================================================================
# ⭐ Superuser (관리자 계정) - 강력한 비밀번호 설정!
POSTGRES_SUPERUSER=postgres
POSTGRES_SUPERUSER_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD_12345

# User Service Database
USER_DB_NAME=wealist_user_db
USER_DB_USER=wealist_user
USER_DB_PASSWORD=CHANGE_THIS_USER_DB_PASSWORD_67890

# Board Service Database
BOARD_DB_NAME=wealist_board_db
BOARD_DB_USER=board_service
BOARD_DB_PASSWORD=CHANGE_THIS_BOARD_DB_PASSWORD_ABCDE

# PostgreSQL Port (EC2에서 외부 접속 가능)
POSTGRES_HOST_PORT=5432

# =============================================================================
# Cache Configuration - Redis
# =============================================================================
# ⭐ 강력한 비밀번호 설정!
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD_FGHIJ
REDIS_HOST_PORT=6379

# =============================================================================
# JWT Configuration
# =============================================================================
# ⭐ 매우 중요! 64자 이상의 랜덤 문자열 사용 (HS512 알고리즘)
# 생성 방법: openssl rand -base64 64 | tr -d '\n'
JWT_SECRET=CHANGE_THIS_JWT_SECRET_KEY_AT_LEAST_64_BYTES_FOR_HS512_ALGORITHM_SECURITY_XXXXXXXXXXXXXXXXXXXXXXXX

JWT_ACCESS_TOKEN_EXPIRATION_MS=1800000     # Access Token: 30분 (밀리초)
JWT_REFRESH_TOKEN_EXPIRATION_MS=604800000  # Refresh Token: 7일 (밀리초)

# =============================================================================
# JPA/Hibernate Configuration
# =============================================================================
JPA_DDL_AUTO=update            # Dev 환경에서는 update 사용
JPA_SHOW_SQL=true              # SQL 로그 출력
JPA_FORMAT_SQL=true            # SQL 포맷팅
JPA_DIALECT=org.hibernate.dialect.PostgreSQLDialect

# =============================================================================
# Service Ports
# =============================================================================
# User Service (Spring Boot)
USER_HOST_PORT=8080

# Board Service (Go)
BOARD_HOST_PORT=8000
BOARD_SERVER_PORT=8000

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=debug                # Dev 환경: debug / Prod 환경: info

# =============================================================================
# OAuth2 Configuration - Google
# =============================================================================
# ⭐ Google Cloud Console에서 발급 필요
# URL: https://console.cloud.google.com/apis/credentials
#
# Authorized redirect URIs 설정 예:
#   http://YOUR_EC2_PUBLIC_IP:3000/oauth/callback
#   http://YOUR_EC2_PUBLIC_IP:8080/login/oauth2/code/google
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your-google-client-secret

# OAuth2 리다이렉트 URL (S3 Frontend URL로 변경 필요)
OAUTH2_REDIRECT_URL=https://your-s3-frontend-url.com/oauth/callback

# =============================================================================
# CORS Configuration
# =============================================================================
# ⭐ S3에서 호스팅되는 프론트엔드 URL을 추가해야 합니다!
# 예: CORS_ORIGINS=https://your-s3-bucket.s3-website.region.amazonaws.com,http://localhost:8000
CORS_ORIGINS=*

# =============================================================================
# Frontend Environment Variables (S3 배포용 참고)
# =============================================================================
# Frontend는 S3에 별도 배포되므로 EC2에서는 사용하지 않습니다.
# 다음 변수들은 프론트엔드 빌드 시 사용됩니다:
#
# VITE_REACT_APP_JAVA_API_URL=http://YOUR_EC2_PUBLIC_IP:8080
# VITE_REACT_APP_GO_API_URL=http://YOUR_EC2_PUBLIC_IP:8000
# VITE_GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com

# =============================================================================
# Monitoring Configuration
# =============================================================================
# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Exporters
REDIS_EXPORTER_PORT=9121
POSTGRES_EXPORTER_PORT=9187
NODE_EXPORTER_PORT=9100

# =============================================================================
# EC2 배포 후 설정 가이드
# =============================================================================
#
# 1. EC2 퍼블릭 IP 확인:
#    - AWS Console > EC2 > 인스턴스 선택 > 퍼블릭 IPv4 주소 복사
#
# 2. 이 파일의 IP 관련 설정 변경:
#    - CORS_ORIGINS
#    - OAUTH2_REDIRECT_URL
#    - VITE_REACT_APP_JAVA_API_URL
#    - VITE_REACT_APP_GO_API_URL
#
# 3. Google OAuth 설정:
#    - Google Cloud Console에서 Authorized redirect URIs에 EC2 IP 추가
#
# 4. EC2 보안 그룹 포트 오픈:
#    - 3000 (Frontend)
#    - 8080 (User Service)
#    - 8000 (Board Service)
#    - 9090 (Prometheus)
#    - 3001 (Grafana)
#    - 22 (SSH)
#
# 5. 선택 사항 (디버깅용):
#    - 5432 (PostgreSQL)
#    - 6379 (Redis)
#
# =============================================================================